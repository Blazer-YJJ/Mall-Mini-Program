{"version":3,"file":"detail.js","sources":["pages/goods/detail.vue","D:/install_project/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZ29vZHMvZGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"goods-detail-container\">\n    <!-- 高级轮播图 - 带视差效果 -->\n    <view class=\"banner-container\">\n      <swiper class=\"swiper\" indicator-dots indicator-active-color=\"#ffffff\" indicator-color=\"rgba(255,255,255,0.5)\" :autoplay=\"true\" :interval=\"3000\" :duration=\"500\" circular>\n        <swiper-item v-for=\"(item, index) in goodsInfo.images\" :key=\"index\" class=\"swiper-item\">\n          <image :src=\"item\" mode=\"aspectFill\" class=\"swiper-image\"></image>\n        </swiper-item>\n      </swiper>\n    </view>\n    \n    <!-- 商品信息卡片 -->\n    <view class=\"goods-info\">\n      <view class=\"price\">¥{{ goodsInfo.price }}</view>\n      <view class=\"name\">{{ goodsInfo.name }}</view>\n      <view class=\"desc\">{{ goodsInfo.desc }}</view>\n    </view>\n    \n    <!-- 商品详情区域 -->\n    <view class=\"goods-detail\">\n      <view class=\"section-header\">\n        <view class=\"title-container\">\n          <view class=\"title-line\"></view>\n          <text class=\"section-title\">商品详情</text>\n          <view class=\"title-line\"></view>\n        </view>\n      </view>\n      <rich-text :nodes=\"goodsInfo.detail\" class=\"detail-content\"></rich-text>\n    </view>\n    \n    <!-- 底部操作栏 -->\n    <view class=\"bottom-bar\">\n      <view class=\"cart-box\" @click=\"goToCart\">\n        <u-icon name=\"shopping-cart\" size=\"40\"></u-icon>\n        <text>购物车</text>\n        <u-badge :count=\"cartCount\" type=\"error\" :offset=\"[0, -10]\" />\n      </view>\n      <view class=\"btn-group\">\n        <view class=\"cart-btn\" @click=\"handleAddToCart\">加入购物车</view>\n        <view class=\"buy-btn\" @click=\"buyNow\">立即购买</view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapMutations } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      goodsInfo: {\n        id: 0,\n        name: '',\n        price: 0,\n        desc: '',\n        detail: '',\n        images: ['/static/logo.png']\n      }\n    }\n  },\n  computed: {\n    ...mapState(['userInfo']),\n    ...mapGetters(['cartCount'])\n  },\n  onLoad(options) {\n    this.loadGoodsDetail(options.id)\n  },\n  methods: {\n    ...mapMutations(['addToCart']),\n    async loadGoodsDetail(id) {\n      try {\n        // 模拟商品详情数据\n        this.goodsInfo = {\n          id: parseInt(id),\n          name: `商品${id}`,\n          price: Math.floor(Math.random() * 1000 + 100),\n          desc: '商品描述信息',\n          detail: '<div>商品详细介绍</div>',\n          images: ['/static/logo.png', '/static/logo.png']\n        }\n      } catch (error) {\n        uni.showToast({\n          title: '加载失败',\n          icon: 'none'\n        })\n      }\n    },\n    goToCart() {\n      uni.switchTab({\n        url: '/pages/cart/index'\n      })\n    },\n    handleAddToCart() {\n      if (!this.userInfo) {\n        this.checkLogin()\n        return\n      }\n      this.addToCart(this.goodsInfo)\n      uni.showToast({\n        title: '已加入购物车',\n        icon: 'success'\n      })\n    },\n    buyNow() {\n      if (!this.userInfo) {\n        this.checkLogin()\n        return\n      }\n      uni.navigateTo({\n        url: `/pages/order/create?goodsId=${this.goodsInfo.id}`\n      })\n    },\n    checkLogin() {\n      uni.showToast({\n        title: '请先登录',\n        icon: 'none'\n      })\n      setTimeout(() => {\n        uni.navigateTo({\n          url: '/pages/user/login'\n        })\n      }, 1500)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.goods-detail-container {\n  padding-bottom: 120rpx;\n  background-color: #f8f8f8;\n  \n  // 轮播图样式\n  .banner-container {\n    position: relative;\n    height: 750rpx;\n    overflow: hidden;\n    \n    .swiper {\n      height: 100%;\n      \n      .swiper-item {\n        position: relative;\n        \n        .swiper-image {\n          width: 100%;\n          height: 100%;\n          transform: scale(1.05);\n          transition: transform 0.3s;\n        }\n      }\n    }\n  }\n  \n  // 商品信息样式\n  .goods-info {\n    margin: 20rpx;\n    padding: 30rpx;\n    background-color: #fff;\n    border-radius: 16rpx;\n    box-shadow: 0 6rpx 20rpx rgba(0,0,0,0.05);\n    \n    .price {\n      font-size: 44rpx;\n      color: #ff6b81;\n      font-weight: bold;\n    }\n    \n    .name {\n      font-size: 34rpx;\n      color: #333;\n      margin-top: 20rpx;\n      font-weight: 500;\n    }\n    \n    .desc {\n      font-size: 28rpx;\n      color: #666;\n      margin-top: 16rpx;\n      line-height: 1.5;\n    }\n  }\n  \n  // 商品详情样式\n  .goods-detail {\n    margin: 30rpx 20rpx;\n    padding: 30rpx;\n    background-color: #fff;\n    border-radius: 16rpx;\n    box-shadow: 0 6rpx 20rpx rgba(0,0,0,0.05);\n    \n    .section-header {\n      margin-bottom: 30rpx;\n      \n      .title-container {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin-bottom: 10rpx;\n        \n        .title-line {\n          height: 2rpx;\n          width: 60rpx;\n          background-color: #333;\n        }\n        \n        .section-title {\n          font-size: 32rpx;\n          font-weight: bold;\n          margin: 0 20rpx;\n          letter-spacing: 4rpx;\n        }\n      }\n    }\n    \n    .detail-content {\n      font-size: 28rpx;\n      line-height: 1.8;\n      color: #333;\n    }\n  }\n  \n  // 底部操作栏样式\n  .bottom-bar {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: 110rpx;\n    background-color: #fff;\n    display: flex;\n    align-items: center;\n    padding: 0 20rpx;\n    box-shadow: 0 -4rpx 16rpx rgba(0, 0, 0, 0.08);\n    \n    .cart-box {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      margin-right: 30rpx;\n      position: relative;\n      padding: 0 20rpx;\n      \n      text {\n        font-size: 22rpx;\n        color: #666;\n        margin-top: 4rpx;\n      }\n    }\n    \n    .btn-group {\n      flex: 1;\n      display: flex;\n      justify-content: space-between;\n      \n      .cart-btn, .buy-btn {\n        flex: 1;\n        height: 80rpx;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 28rpx;\n        font-weight: bold;\n        border-radius: 40rpx;\n        margin: 0 10rpx;\n      }\n      \n      .cart-btn {\n        background-color: #ffeaa7;\n        color: #ff6b00;\n      }\n      \n      .buy-btn {\n        background: linear-gradient(135deg, #667eea, #764ba2);\n        color: #fff;\n      }\n    }\n  }\n}\n</style>","import MiniProgramPage from 'E:/uniapp/Mall-Mini-Program/pages/goods/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["mapState","mapGetters","mapMutations","uni"],"mappings":";;AAgDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,WAAW;AAAA,QACT,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,OAAO;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,QAAQ,CAAC,kBAAkB;AAAA,MAC7B;AAAA,IACF;AAAA,EACD;AAAA,EACD,UAAU;AAAA,IACR,GAAGA,cAAQ,SAAC,CAAC,UAAU,CAAC;AAAA,IACxB,GAAGC,cAAU,WAAC,CAAC,WAAW,CAAC;AAAA,EAC5B;AAAA,EACD,OAAO,SAAS;AACd,SAAK,gBAAgB,QAAQ,EAAE;AAAA,EAChC;AAAA,EACD,SAAS;AAAA,IACP,GAAGC,cAAY,aAAC,CAAC,WAAW,CAAC;AAAA,IAC7B,MAAM,gBAAgB,IAAI;AACxB,UAAI;AAEF,aAAK,YAAY;AAAA,UACf,IAAI,SAAS,EAAE;AAAA,UACf,MAAM,KAAK,EAAE;AAAA,UACb,OAAO,KAAK,MAAM,KAAK,OAAO,IAAI,MAAO,GAAG;AAAA,UAC5C,MAAM;AAAA,UACN,QAAQ;AAAA,UACR,QAAQ,CAAC,oBAAoB,kBAAkB;AAAA,QACjD;AAAA,MACA,SAAO,OAAO;AACdC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AAAA,MACH;AAAA,IACD;AAAA,IACD,WAAW;AACTA,oBAAAA,MAAI,UAAU;AAAA,QACZ,KAAK;AAAA,OACN;AAAA,IACF;AAAA,IACD,kBAAkB;AAChB,UAAI,CAAC,KAAK,UAAU;AAClB,aAAK,WAAW;AAChB;AAAA,MACF;AACA,WAAK,UAAU,KAAK,SAAS;AAC7BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,OACP;AAAA,IACF;AAAA,IACD,SAAS;AACP,UAAI,CAAC,KAAK,UAAU;AAClB,aAAK,WAAW;AAChB;AAAA,MACF;AACAA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,+BAA+B,KAAK,UAAU,EAAE;AAAA,OACtD;AAAA,IACF;AAAA,IACD,aAAa;AACXA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,OACP;AACD,iBAAW,MAAM;AACfA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK;AAAA,SACN;AAAA,MACF,GAAE,IAAI;AAAA,IACT;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5HA,GAAG,WAAW,eAAe;"}