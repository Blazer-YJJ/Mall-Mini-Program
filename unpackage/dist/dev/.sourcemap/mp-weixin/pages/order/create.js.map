{"version":3,"file":"create.js","sources":["pages/order/create.vue","D:/install_project/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXIvY3JlYXRlLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"order-create-container\">\n    <!-- 收货地址 -->\n    <view class=\"address-section\" @click=\"selectAddress\">\n      <block v-if=\"selectedAddress\">\n        <view class=\"address-info\">\n          <view class=\"user-info\">\n            <text class=\"name\">{{ selectedAddress.name }}</text>\n            <text class=\"phone\">{{ selectedAddress.phone }}</text>\n          </view>\n          <view class=\"address-detail\">\n            {{ selectedAddress.province }} {{ selectedAddress.city }} {{ selectedAddress.district }} {{ selectedAddress.address }}\n          </view>\n        </view>\n      </block>\n      <view class=\"no-address\" v-else>\n        <u-icon name=\"map\" size=\"40\"></u-icon>\n        <text>请选择收货地址</text>\n      </view>\n      <u-icon name=\"arrow-right\" color=\"#ccc\"></u-icon>\n    </view>\n    \n    <!-- 商品列表 -->\n    <view class=\"goods-section\">\n      <view class=\"section-title\">商品信息</view>\n      <view class=\"goods-list\">\n        <view class=\"goods-item\" v-for=\"item in orderGoods\" :key=\"item.id\">\n          <image :src=\"item.image\" mode=\"aspectFill\" class=\"goods-image\"></image>\n          <view class=\"goods-info\">\n            <text class=\"goods-name\">{{ item.name }}</text>\n            <view class=\"goods-price-box\">\n              <text class=\"goods-price\">¥{{ item.price }}</text>\n              <text class=\"goods-count\">x{{ item.count }}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 支付方式 -->\n    <view class=\"payment-section\">\n      <view class=\"section-title\">支付方式</view>\n      <view class=\"payment-list\">\n        <view class=\"payment-item\" @click=\"selectPayment('wechat')\">\n          <view class=\"payment-info\">\n            <u-icon name=\"weixin-fill\" color=\"#09BB07\" size=\"40\"></u-icon>\n            <text>微信支付</text>\n          </view>\n          <u-radio v-model=\"paymentMethod\" label=\"wechat\" name=\"payment\"></u-radio>\n        </view>\n        <view class=\"payment-item\" @click=\"selectPayment('alipay')\">\n          <view class=\"payment-info\">\n            <u-icon name=\"zhifubao-circle-fill\" color=\"#1296db\" size=\"40\"></u-icon>\n            <text>支付宝支付</text>\n          </view>\n          <u-radio v-model=\"paymentMethod\" label=\"alipay\" name=\"payment\"></u-radio>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 订单金额 -->\n    <view class=\"amount-section\">\n      <view class=\"amount-item\">\n        <text>商品金额</text>\n        <text>¥{{ goodsAmount }}</text>\n      </view>\n      <view class=\"amount-item\">\n        <text>运费</text>\n        <text>¥{{ freight }}</text>\n      </view>\n      <view class=\"amount-item total\">\n        <text>实付金额</text>\n        <text class=\"price\">¥{{ totalAmount }}</text>\n      </view>\n    </view>\n    \n    <!-- 提交订单 -->\n    <view class=\"submit-section\">\n      <view class=\"total-box\">\n        <text>合计：</text>\n        <text class=\"price\">¥{{ totalAmount }}</text>\n      </view>\n      <u-button type=\"primary\" @click=\"submitOrder\">提交订单</u-button>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      orderGoods: [],\n      selectedAddress: null,\n      paymentMethod: 'wechat',\n      freight: 10\n    }\n  },\n  computed: {\n    ...mapState(['addressList']),\n    goodsAmount() {\n      return this.orderGoods.reduce((total, item) => total + item.price * item.count, 0).toFixed(2)\n    },\n    totalAmount() {\n      return (parseFloat(this.goodsAmount) + this.freight).toFixed(2)\n    }\n  },\n  onLoad(options) {\n    // 从购物车结算或直接购买\n    if (options.goods) {\n      this.orderGoods = JSON.parse(options.goods)\n    } else if (options.goodsId) {\n      // 模拟直接购买的商品数据\n      this.orderGoods = [{\n        id: parseInt(options.goodsId),\n        name: `商品${options.goodsId}`,\n        price: Math.floor(Math.random() * 1000 + 100),\n        image: '/static/logo.png',\n        count: 1\n      }]\n    }\n    \n    // 获取默认地址\n    if (this.addressList.length > 0) {\n      this.selectedAddress = this.addressList.find(item => item.isDefault) || this.addressList[0]\n    }\n  },\n  methods: {\n    selectAddress() {\n      uni.navigateTo({\n        url: '/pages/user/address?select=true'\n      })\n    },\n    selectPayment(method) {\n      this.paymentMethod = method\n    },\n    submitOrder() {\n      if (!this.selectedAddress) {\n        uni.showToast({\n          title: '请选择收货地址',\n          icon: 'none'\n        })\n        return\n      }\n      \n      // 模拟提交订单\n      uni.showLoading({\n        title: '提交中...'\n      })\n      \n      setTimeout(() => {\n        uni.hideLoading()\n        uni.showToast({\n          title: '下单成功',\n          icon: 'success'\n        })\n        \n        // 跳转到订单列表\n        setTimeout(() => {\n          uni.redirectTo({\n            url: '/pages/order/list'\n          })\n        }, 1500)\n      }, 2000)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.order-create-container {\n  min-height: 100vh;\n  background-color: #f8f8f8;\n  padding-bottom: 120rpx;\n  \n  .address-section {\n    display: flex;\n    align-items: center;\n    background-color: #fff;\n    padding: 30rpx;\n    margin-bottom: 20rpx;\n    \n    .address-info {\n      flex: 1;\n      \n      .user-info {\n        margin-bottom: 10rpx;\n        \n        .name {\n          font-size: 32rpx;\n          font-weight: bold;\n          margin-right: 20rpx;\n        }\n        \n        .phone {\n          font-size: 28rpx;\n          color: #666;\n        }\n      }\n      \n      .address-detail {\n        font-size: 28rpx;\n        color: #333;\n      }\n    }\n    \n    .no-address {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      color: #999;\n      font-size: 28rpx;\n      \n      text {\n        margin-left: 10rpx;\n      }\n    }\n  }\n  \n  .goods-section, .payment-section, .amount-section {\n    background-color: #fff;\n    margin-bottom: 20rpx;\n    padding: 20rpx 30rpx;\n    \n    .section-title {\n      font-size: 30rpx;\n      font-weight: bold;\n      margin-bottom: 20rpx;\n    }\n  }\n  \n  .goods-list {\n    .goods-item {\n      display: flex;\n      padding: 20rpx 0;\n      border-bottom: 1px solid #f5f5f5;\n      \n      &:last-child {\n        border-bottom: none;\n      }\n      \n      .goods-image {\n        width: 160rpx;\n        height: 160rpx;\n        margin-right: 20rpx;\n      }\n      \n      .goods-info {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        \n        .goods-name {\n          font-size: 28rpx;\n          color: #333;\n        }\n        \n        .goods-price-box {\n          display: flex;\n          justify-content: space-between;\n          \n          .goods-price {\n            font-size: 32rpx;\n            color: #ff5500;\n            font-weight: bold;\n          }\n          \n          .goods-count {\n            font-size: 28rpx;\n            color: #999;\n          }\n        }\n      }\n    }\n  }\n  \n  .payment-list {\n    .payment-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 20rpx 0;\n      \n      .payment-info {\n        display: flex;\n        align-items: center;\n        \n        text {\n          margin-left: 20rpx;\n          font-size: 28rpx;\n        }\n      }\n    }\n  }\n  \n  .amount-section {\n    .amount-item {\n      display: flex;\n      justify-content: space-between;\n      padding: 10rpx 0;\n      font-size: 28rpx;\n      color: #666;\n      \n      &.total {\n        margin-top: 20rpx;\n        padding-top: 20rpx;\n        border-top: 1px solid #f5f5f5;\n        font-size: 32rpx;\n        color: #333;\n        \n        .price {\n          color: #ff5500;\n          font-weight: bold;\n        }\n      }\n    }\n  }\n  \n  .submit-section {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: 100rpx;\n    background-color: #fff;\n    display: flex;\n    align-items: center;\n    padding: 0 30rpx;\n    box-shadow: 0 -2rpx 10rpx rgba(0,0,0,0.05);\n    \n    .total-box {\n      flex: 1;\n      \n      .price {\n        color: #ff5500;\n        font-size: 36rpx;\n        font-weight: bold;\n      }\n    }\n    \n    button {\n      width: 240rpx;\n      height: 80rpx;\n      line-height: 80rpx;\n      border-radius: 40rpx;\n    }\n  }\n}\n</style>","import MiniProgramPage from 'E:/uniapp/Mall-Mini-Program/pages/order/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["mapState","uni"],"mappings":";;AA0FA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,YAAY,CAAE;AAAA,MACd,iBAAiB;AAAA,MACjB,eAAe;AAAA,MACf,SAAS;AAAA,IACX;AAAA,EACD;AAAA,EACD,UAAU;AAAA,IACR,GAAGA,cAAQ,SAAC,CAAC,aAAa,CAAC;AAAA,IAC3B,cAAc;AACZ,aAAO,KAAK,WAAW,OAAO,CAAC,OAAO,SAAS,QAAQ,KAAK,QAAQ,KAAK,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,IAC7F;AAAA,IACD,cAAc;AACZ,cAAQ,WAAW,KAAK,WAAW,IAAI,KAAK,SAAS,QAAQ,CAAC;AAAA,IAChE;AAAA,EACD;AAAA,EACD,OAAO,SAAS;AAEd,QAAI,QAAQ,OAAO;AACjB,WAAK,aAAa,KAAK,MAAM,QAAQ,KAAK;AAAA,eACjC,QAAQ,SAAS;AAE1B,WAAK,aAAa,CAAC;AAAA,QACjB,IAAI,SAAS,QAAQ,OAAO;AAAA,QAC5B,MAAM,KAAK,QAAQ,OAAO;AAAA,QAC1B,OAAO,KAAK,MAAM,KAAK,OAAO,IAAI,MAAO,GAAG;AAAA,QAC5C,OAAO;AAAA,QACP,OAAO;AAAA,OACR;AAAA,IACH;AAGA,QAAI,KAAK,YAAY,SAAS,GAAG;AAC/B,WAAK,kBAAkB,KAAK,YAAY,KAAK,UAAQ,KAAK,SAAS,KAAK,KAAK,YAAY,CAAC;AAAA,IAC5F;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,gBAAgB;AACdC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,OACN;AAAA,IACF;AAAA,IACD,cAAc,QAAQ;AACpB,WAAK,gBAAgB;AAAA,IACtB;AAAA,IACD,cAAc;AACZ,UAAI,CAAC,KAAK,iBAAiB;AACzBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD;AAAA,MACF;AAGAA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,OACR;AAED,iBAAW,MAAM;AACfA,sBAAAA,MAAI,YAAY;AAChBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AAGD,mBAAW,MAAM;AACfA,wBAAAA,MAAI,WAAW;AAAA,YACb,KAAK;AAAA,WACN;AAAA,QACF,GAAE,IAAI;AAAA,MACR,GAAE,GAAI;AAAA,IACT;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtKA,GAAG,WAAW,eAAe;"}