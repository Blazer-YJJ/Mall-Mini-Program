{"version":3,"names":["_sfc_main","data","goodsInfo","id","name","price","desc","detail","images","computed","_objectSpread2","common_vendor","mapState","mapGetters","onLoad","options","loadGoodsDetail","methods","mapMutations","_this","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","wrap","_callee$","_context","prev","next","parseInt","concat","Math","floor","random","error","index","showToast","title","icon","stop","goToCart","switchTab","url","handleAddToCart","userInfo","checkLogin","addToCart","buyNow","navigateTo","setTimeout","wx","createPage","MiniProgramPage"],"sources":["detail.vue","D:/install_project/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZ29vZHMvZGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"goods-detail-container\">\n    <swiper class=\"swiper\" :indicator-dots=\"true\" :autoplay=\"true\" :interval=\"3000\" :duration=\"500\">\n      <swiper-item v-for=\"(item, index) in goodsInfo.images\" :key=\"index\">\n        <image :src=\"item\" mode=\"aspectFill\" class=\"swiper-image\"></image>\n      </swiper-item>\n    </swiper>\n    <view class=\"goods-info\">\n      <view class=\"price\">¥{{ goodsInfo.price }}</view>\n      <view class=\"name\">{{ goodsInfo.name }}</view>\n      <view class=\"desc\">{{ goodsInfo.desc }}</view>\n    </view>\n    <view class=\"goods-detail\">\n      <view class=\"title\">商品详情</view>\n      <rich-text :nodes=\"goodsInfo.detail\"></rich-text>\n    </view>\n    <view class=\"bottom-bar\">\n      <view class=\"cart-box\" @click=\"goToCart\">\n        <u-icon name=\"shopping-cart\" size=\"40\"></u-icon>\n        <text>购物车</text>\n        <u-badge :count=\"cartCount\" type=\"error\" :offset=\"[0, -10]\" />\n      </view>\n      <view class=\"btn-group\">\n        <u-button type=\"warning\" @click=\"addToCart\">加入购物车</u-button>\n        <u-button type=\"primary\" @click=\"buyNow\">立即购买</u-button>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapMutations } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      goodsInfo: {\n        id: 0,\n        name: '',\n        price: 0,\n        desc: '',\n        detail: '',\n        images: ['/static/logo.png']\n      }\n    }\n  },\n  computed: {\n    ...mapState(['userInfo']),\n    ...mapGetters(['cartCount'])\n  },\n  onLoad(options) {\n    this.loadGoodsDetail(options.id)\n  },\n  methods: {\n    ...mapMutations(['addToCart']),\n    async loadGoodsDetail(id) {\n      try {\n        // 模拟商品详情数据\n        this.goodsInfo = {\n          id: parseInt(id),\n          name: `商品${id}`,\n          price: Math.floor(Math.random() * 1000 + 100),\n          desc: '商品描述信息',\n          detail: '<div>商品详细介绍</div>',\n          images: ['/static/logo.png', '/static/logo.png']\n        }\n      } catch (error) {\n        uni.showToast({\n          title: '加载失败',\n          icon: 'none'\n        })\n      }\n    },\n    goToCart() {\n      uni.switchTab({\n        url: '/pages/cart/index'\n      })\n    },\n    handleAddToCart() {\n      if (!this.userInfo) {\n        this.checkLogin()\n        return\n      }\n      this.addToCart(this.goodsInfo)\n      uni.showToast({\n        title: '已加入购物车',\n        icon: 'success'\n      })\n    },\n    buyNow() {\n      if (!this.userInfo) {\n        this.checkLogin()\n        return\n      }\n      uni.navigateTo({\n        url: `/pages/order/create?goodsId=${this.goodsInfo.id}`\n      })\n    },\n    checkLogin() {\n      uni.showToast({\n        title: '请先登录',\n        icon: 'none'\n      })\n      setTimeout(() => {\n        uni.navigateTo({\n          url: '/pages/user/login'\n        })\n      }, 1500)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.goods-detail-container {\n  padding-bottom: 100rpx;\n  .swiper {\n    width: 100%;\n    height: 750rpx;\n    .swiper-image {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  .goods-info {\n    padding: 20rpx;\n    background-color: #fff;\n    .price {\n      font-size: 40rpx;\n      color: #ff5500;\n      font-weight: bold;\n    }\n    .name {\n      font-size: 32rpx;\n      color: #333;\n      margin-top: 20rpx;\n    }\n    .desc {\n      font-size: 28rpx;\n      color: #666;\n      margin-top: 10rpx;\n    }\n  }\n  .goods-detail {\n    margin-top: 20rpx;\n    padding: 20rpx;\n    background-color: #fff;\n    .title {\n      font-size: 32rpx;\n      font-weight: bold;\n      margin-bottom: 20rpx;\n    }\n  }\n  .bottom-bar {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: 100rpx;\n    background-color: #fff;\n    display: flex;\n    align-items: center;\n    padding: 0 20rpx;\n    box-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.1);\n    .cart-box {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      margin-right: 30rpx;\n      position: relative;\n      text {\n        font-size: 24rpx;\n        color: #666;\n      }\n    }\n    .btn-group {\n      flex: 1;\n      display: flex;\n      justify-content: space-between;\n      button {\n        margin: 0 10rpx;\n      }\n    }\n  }\n}\n</style>","import MiniProgramPage from 'E:/uniapp/Mall-Mini-Program/pages/goods/detail.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;AAiCA,IAAKA,SAAA,GAAU;EACbC,IAAA,WAAAA,KAAA,EAAO;IACL,OAAO;MACLC,SAAA,EAAW;QACTC,EAAA,EAAI;QACJC,IAAA,EAAM;QACNC,KAAA,EAAO;QACPC,IAAA,EAAM;QACNC,MAAA,EAAQ;QACRC,MAAA,EAAQ,CAAC,kBAAkB;MAC7B;IACF;EACD;EACDC,QAAA,EAAAC,cAAA,CAAAA,cAAA,KACKC,aAAA,CAAQC,QAAA,CAAC,CAAC,UAAU,CAAC,IACrBD,aAAA,CAAUE,UAAA,CAAC,CAAC,WAAW,CAAC,EAC5B;EACDC,MAAA,WAAAA,OAAOC,OAAA,EAAS;IACd,KAAKC,eAAA,CAAgBD,OAAA,CAAQZ,EAAE;EAChC;EACDc,OAAA,EAAAP,cAAA,CAAAA,cAAA,KACKC,aAAA,CAAYO,YAAA,CAAC,CAAC,WAAW,CAAC;IACvBF,eAAA,WAAAA,gBAAgBb,EAAA,EAAI;MAAA,IAAAgB,KAAA;MAAA,OAAAC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,OAAAF,oBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACxB,IAAI;gBAEFT,KAAA,CAAKjB,SAAA,GAAY;kBACfC,EAAA,EAAI0B,QAAA,CAAS1B,EAAE;kBACfC,IAAA,iBAAA0B,MAAA,CAAW3B,EAAE;kBACbE,KAAA,EAAO0B,IAAA,CAAKC,KAAA,CAAMD,IAAA,CAAKE,MAAA,EAAO,GAAI,MAAO,GAAG;kBAC5C3B,IAAA,EAAM;kBACNC,MAAA,EAAQ;kBACRC,MAAA,EAAQ,CAAC,oBAAoB,kBAAkB;gBACjD;cACA,SAAO0B,KAAA,EAAO;gBACdvB,aAAA,CAAAwB,KAAA,CAAIC,SAAA,CAAU;kBACZC,KAAA,EAAO;kBACPC,IAAA,EAAM;gBAAA,CACP;cACH;YAAA;YAAA;cAAA,OAAAZ,QAAA,CAAAa,IAAA;UAAA;QAAA,GAAAhB,OAAA;MAAA;IACD;IACDiB,QAAA,WAAAA,SAAA,EAAW;MACT7B,aAAA,CAAAwB,KAAA,CAAIM,SAAA,CAAU;QACZC,GAAA,EAAK;MAAA,CACN;IACF;IACDC,eAAA,WAAAA,gBAAA,EAAkB;MAChB,IAAI,CAAC,KAAKC,QAAA,EAAU;QAClB,KAAKC,UAAA,EAAW;QAChB;MACF;MACA,KAAKC,SAAA,CAAU,KAAK5C,SAAS;MAC7BS,aAAA,CAAAwB,KAAA,CAAIC,SAAA,CAAU;QACZC,KAAA,EAAO;QACPC,IAAA,EAAM;MAAA,CACP;IACF;IACDS,MAAA,WAAAA,OAAA,EAAS;MACP,IAAI,CAAC,KAAKH,QAAA,EAAU;QAClB,KAAKC,UAAA,EAAW;QAChB;MACF;MACAlC,aAAA,CAAAwB,KAAA,CAAIa,UAAA,CAAW;QACbN,GAAA,iCAAAZ,MAAA,CAAoC,KAAK5B,SAAA,CAAUC,EAAE;MAAA,CACtD;IACF;IACD0C,UAAA,WAAAA,WAAA,EAAa;MACXlC,aAAA,CAAAwB,KAAA,CAAIC,SAAA,CAAU;QACZC,KAAA,EAAO;QACPC,IAAA,EAAM;MAAA,CACP;MACDW,UAAA,CAAW,YAAM;QACftC,aAAA,CAAAwB,KAAA,CAAIa,UAAA,CAAW;UACbN,GAAA,EAAK;QAAA,CACN;MACF,GAAE,IAAI;IACT;EAAA;AAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7GAQ,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}